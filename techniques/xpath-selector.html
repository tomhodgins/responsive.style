<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <meta name=keywords content="Responsive, web design, extending, CSS, styling, techniques, rwd, technology, CSS reprocessor, JS-in-CSS, plugins, element queries, style scoping, xpath">
  <meta name=description content="Responsive.Style is your guide to extending CSS with JavaScript, come discover new techniques and the plugins that make them easy to use.">
  
  <link href="//fonts.googleapis.com/css?family=Cormorant+Garamond|Crimson+Text" rel=stylesheet>
  <link href="//tomhodgins.github.io/responsive.style/src/style.css" rel=stylesheet>
</head>
<body>
<h1 id="using-xpath-to-select-elements">Using XPath to Select Elements</h1>
<p>Many CSS authors may not be familiar with XPath so they will most likely be shocked by the expressive power that XPath selectors allow. XPath is a web standard, and defines a way that nodes in an XML document (and elements in an HTML document) can be described like a unix file system, and provides a syntax (and many built-in utility functions) for selecting nodes by writing a selector that resembled a unix file system path. Unlike CSS which is top-down and never backtracks, XPath selectors all you to move up (to parent and ancestor elements), down, and sideways.</p>
<p>XPath was mainly used for extracting (or transforming) data held in XML documents, or as a way to access information in XML format, and seems to have peaked in usage for that purpose before the popularization of JSON. But recently browsers have gained the ability to evaluate XPath selectors using JavaScript using <code>document.evaluate()</code>, which has support in all modern browsers. It's now possible to use XPath selectors in the browser as a way to select elements for the purposes of styling, and while it will <em>never</em> perform (XPath being evaluated by JavaScript, then styles being set) as fast as native CSS, it <em>does</em> extend the expressive range of selectors to almost everything a CSS author could ever hope for.</p>
<h2 id="parts-required">Parts Required</h2>
<p>Using <code>document.evaluate</code> to evaluate an XPath selector and returning the result as an array that can be iterated:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> test <span class="op">=</span> <span class="st">&#39;//*&#39;</span>
<span class="kw">var</span> element <span class="op">=</span> <span class="kw">new</span> <span class="at">Array</span>()

<span class="kw">var</span> result <span class="op">=</span> <span class="va">document</span>.<span class="at">evaluate</span>(
               test<span class="op">,</span>
               document<span class="op">,</span>
               <span class="kw">null</span><span class="op">,</span>
               <span class="va">XPathResult</span>.<span class="at">UNORDERED_NODE_SNAPSHOT_TYPE</span><span class="op">,</span>
               <span class="kw">null</span>
             )

<span class="cf">for</span> (<span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="va">result</span>.<span class="at">snapshotLength</span><span class="op">;</span> i<span class="op">++</span>) <span class="op">{</span>

  <span class="va">element</span>.<span class="at">push</span>(<span class="va">result</span>.<span class="at">snapshotItem</span>(i))

<span class="op">}</span>

<span class="co">/* `element` is an array containing all matched nodes in document */</span></code></pre></div>
<h2 id="plugins-capable">Plugins Capable</h2>
<ul>
<li><a href="../plugins/xpathy.html">XPathy</a></li>
<li><a href="../plugins/xpath-selector-mixin.html">XPath Selector Mixin</a></li>
</ul>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/XPath">XPath reference on MDN</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/ms256115(v=vs.110).aspx">XPath reference on MSDN</a></li>
<li><a href="https://www.w3schools.com/xml/xpath_intro.asp">XPath tutorials on W3Schools</a></li>
</ul>
<nav>
  <a href=//tomhodgins.github.io/responsive.style/>Home</a>
  <a href=//tomhodgins.github.io/responsive.style/techniques>Techniques</a>
  <a href=//tomhodgins.github.io/responsive.style/plugins>Plugins</a>
  <a href=//tomhodgins.github.io/responsive.style/theory>Theory</a>
</nav>

<footer>by <a href=https://twitter.com/innovati>Tommy Hodgins</a></footer>
</body>
</html>
